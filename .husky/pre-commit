#!/usr/bin/env bash

# Pre-commit Hook Script
# This runs comprehensive tests before allowing commits

set -e

echo "🔍 Running pre-commit checks..."

# 1. TypeScript Check
echo "📝 Checking TypeScript..."
npm run test:types

# 2. ESLint Check  
echo "🔍 Running ESLint..."
npm run lint

# 3. Build Test
echo "🔨 Testing build process..."
npm run build:standalone

# 4. Comprehensive Tests
echo "🧪 Running comprehensive test suite..."
npm run test:comprehensive

# 5. Performance Check
echo "⚡ Performance check..."
if [ -d "dist" ]; then
    BUNDLE_SIZE=$(du -sh dist | cut -f1)
    echo "   Bundle size: $BUNDLE_SIZE"
fi

echo "✅ All pre-commit checks passed!"
echo "🚀 Ready to commit"